# Леса (v0.7)

В v0.7 добавлены леса в виде **реальных 3D-деревьев** (variant C).

## Ключевые идеи
- Деревья рисуются отдельным инстанс-шейдером (`flight/render/trees.py`).
- Один низкополигональный меш (ствол + крона) + **инстанс-буфер** на чанк.
- Инстансы генерируются на CPU детерминированно и передаются в GPU вместе с чанком.

## Как определяется, где растут деревья
Биом задаётся маской плотности леса `HeightProvider.forest_density_grid(...)`:

- **moisture noise** (низкочастотный) формирует пятна леса.
- ограничение по **высоте** (нет плотного леса у воды и на снежных пиках).
- ограничение по **уклону** (меньше деревьев на склонах/скалах).
- небольшой **буст** рядом с водой (реки/озёра), но не на самой воде.

## Производительность и LOD
По умолчанию деревья включаются только в ближнем кольце LOD:
- `near`: `trees_enabled=True`
- `far`: `trees_enabled=False`

Это даёт хороший выигрыш FPS и уменьшает количество инстансов.

## Настройки
CLI:
- `--trees / --no-trees` — включить/выключить леса.
- `--tree-density <float>` — множитель плотности (1.0 по умолчанию).

Примечание: даже при выключенных лесах остальная генерация мира не меняется.
