# Архитектура v0.1

## Основные компоненты
- `flight.app.App` — окно, цикл, тайминг, рендер
- `flight.render.Renderer` — шейдеры, отрисовка чанков
- `flight.render.CameraRail` — движение по Z, высота по рельефу со сглаживанием
- `flight.world.ChunkManager` — определяет окно видимых чанков, запускает фон-генерацию
- `flight.world.ChunkWorker` — поток генерации: heightmap -> вершины/нормали
- `flight.world.height.height_at(x,z)` — детерминированная высота по seed
- `flight.world.mesh` — сборка сетки чанка

## Потоки
- Главный поток: pygame loop + OpenGL контекст + создание GPU буферов
- Worker поток: CPU-генерация чанков, передача готовых массивов через очередь

## Данные чанка
- Координаты `(cx, cz)`
- CPU массив вершин (позиция+нормаль), индексы (общие для всех чанков)
- GPU VBO/IBO/VAO создаются в главном потоке

## Почему так
- GPU-ресурсы нельзя безопасно создавать в фоновом потоке без отдельного контекста.
- Чтобы избежать фризов, CPU генерация вынесена в worker, а GPU загрузка дозируется.

## v0.3 decisions
- Variant A: исключаем high-frequency procedural shading, чтобы убрать shimmer на движении камеры.
- LOD (если присутствует) считается экспериментальным и выключен по умолчанию.
