# Сборка и запуск

Этот документ описывает **актуальный** способ запуска приложения и все поддерживаемые CLI-параметры.

## Требования
- Python 3.12
- Poetry

## Установка
```bash
poetry install
```

## Запуск
```bash
poetry run flight
```

## Параметры CLI

### Базовые
- `--seed <int|random>` — сид мира (по умолчанию `12345`). `random` выбирает случайный сид.
- `--speed <float>` — скорость полёта (по умолчанию `20.0`).
- `--height-offset <float>` — высота камеры над рельефом (по умолчанию `15.0`).
- `--wireframe` — каркасный режим.
- `--debug` — debug overlay (HUD + логи).

### Геометрия мира и туман
- `--chunk-res <int>` — количество вершин на сторону чанка (по умолчанию `64`).
- `--chunk-size <float>` — размер чанка в мировых единицах (по умолчанию `64.0`).
- `--fog-start <float>` — старт тумана (по умолчанию `150.0`).
- `--fog-end <float>` — конец тумана (по умолчанию `600.0`).

### Производительность и режимы
- `--target-fps <int>` — целевой FPS для адаптивного стриминга чанков (по умолчанию `60`).
- `--lod / --no-lod` — LOD-кольца (по умолчанию **выключено**: `--no-lod`).
- `--noise fast|simplex` — режим шума высот (по умолчанию `fast`).

### Леса (v0.7)
- `--trees / --no-trees` — включить/выключить леса (по умолчанию **включено**: `--trees`).
- `--tree-density <float>` — множитель плотности деревьев (по умолчанию `1.0`).

## Быстрые сценарии проверки

### Debug overlay
```bash
poetry run flight --debug
```

### Отключить леса (сравнение производительности/картинки)
```bash
poetry run flight --no-trees --debug
```

### Включить LOD (экспериментально)
```bash
poetry run flight --lod --debug
```

## Замечания для macOS
- pygame использует системный OpenGL. Запускайте из GUI-сессии (в headless окружениях окно/контекст часто не создаётся).
- Проект рассчитан на OpenGL 3.2+ (предпочтительно 3.3 core). На macOS контекст запрашивается через GL-атрибуты pygame.
