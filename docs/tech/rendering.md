# Рендеринг (v0.4 Variant B)

## Цели
- стабильная картинка без мерцания при движении камеры
- простая и предсказуемая модель света
- fog скрывает даль и упрощает “бесконечность”

## Pipeline
- pygame создаёт OpenGL-окно
- ModernGL создаёт контекст и компилирует шейдеры
- каждый кадр:
  - обновляется камера
  - подгружаются чанки (CPU->GPU)
  - рисуется террейн (один проход)

## Шейдер поверхности (baseline v0.3 + улучшение v0.4)
- **Цвет по высоте**: простая палитра low->green, mid->gray, high->white
- **Вода (v0.3)**: дополнительная маска `water` (реки/озёра) подмешивает синие цвета
- **Освещение**: Lambert diffuse + постоянный ambient
- **Туман**: forward fog по `dist = max(z_world - z_cam, 0)`

Почему без “текстуры”:
- тонкие procedural-паттерны (контуры/noise/fract) дают shimmer на движении камеры
- в v0.3 выбран стабильный baseline

Что добавлено в v0.4:
- 2 небольшие tile-текстуры (grass/rock) с **mipmapping** и trilinear фильтрацией
- смешивание материалов по высоте и уклону (без high-frequency процедурных паттернов)
- “product LOD”: дальнее кольцо дополнительно смешивается с fog через `u_chunk_fade`

## Отладка
- `--wireframe` — проволочный режим
- `--debug` — HUD/логи (если включены в Renderer)
