# flight (v0.8.2)

Графическая программа "бесконечного" полёта над гористой поверхностью.
Рендер: ModernGL, окно/ввод: pygame. Менеджер зависимостей: Poetry.

## Цель v0.3+ (Variant A: стабильность)
Начиная с v0.3 зафиксирована **стабильная базовая картинка без мерцания**:
- цвет поверхности задаётся по высоте (палитра)
- освещение Lambert (diffuse) + фиксированный ambient
- туман (fog) по дальности вперёд

Дополнительно (v0.3+):
- более разнообразная форма рельефа (domain warp + macro layer)
- реки и озёра (синие оттенки поверх базовой палитры)

В этой версии **нет** мелкодетальной процедурной "текстуры" (контуров/noise) — это сознательное решение, чтобы убрать shimmer на движении камеры.

## Что добавлено в v0.7
- Леса (variant C): реальные 3D-деревья (инстансинг), детерминированное размещение по биому.
- Леса появляются только в "ближнем" кольце LOD (для FPS), дальние чанки без деревьев.

## Что добавлено в v0.8
- Ручное управление полётом стрелками:
  - ↑ — вперёд
  - ↓ — назад
  - ← — поворот влево
  - → — поворот вправо
- Режим `--auto` — автополёт вперёд (как было раньше, без ручного управления).

## Требования
- Python 3.12
- macOS приоритетно (кроссплатформенно)

## Установка
```bash
poetry install
```

## Запуск
```bash
poetry run flight
```

## Параметры CLI
- `--seed <int|random>` (по умолчанию 12345)
- `--speed <float>`
- `--height-offset <float>`
- `--chunk-res <int>`
- `--chunk-size <float>`
- `--fog-start <float>`
- `--fog-end <float>`
- `--wireframe`
- `--debug`
- `--auto` (автополёт вперёд, без ручного управления)
- `--turn-rate <float>` (скорость поворота в ручном режиме, рад/с)
- `--trees / --no-trees` (по умолчанию включено)
- `--tree-density <float>` (множитель плотности, по умолчанию 1.0)
- `--auto` (автополёт вперёд, по умолчанию выключено)
- `--turn-rate <float>` (скорость поворота yaw в рад/сек, по умолчанию 1.8)

Экспериментально:
- `--lod / --no-lod` (по умолчанию **выключено** в v0.3, чтобы избежать артефактов)
- `--noise fast|simplex` (влияет на генерацию высот, не на "текстуру" поверхности)

## Документация
- PM: `/docs/pm/prd.md`, `/docs/pm/roadmap.md`
- Tech: `/docs/tech/*`
- Индекс: `/docs/knowledge_base.md`
