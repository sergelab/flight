# flight (v0.3.3)

Графическая программа "бесконечного" полёта над гористой поверхностью.
Рендер: ModernGL, окно/ввод: pygame. Менеджер зависимостей: Poetry.

## Требования
- Python 3.12
- macOS приоритетно (кроссплатформенно)

## Установка
```bash
poetry install
```

## Запуск
```bash
poetry run flight
```

Параметры:
- `--seed <int|random>` (по умолчанию 12345)
- `--speed <float>` (по умолчанию 20.0)
- `--height-offset <float>` (по умолчанию 15.0)
- `--wireframe` (включить режим сетки)
- `--debug` (HUD + логи)
- `--chunk-res <int>` (вершин по стороне чанка)
- `--chunk-size <float>` (размер чанка в мировых единицах)
- `--fog-start <float>` / `--fog-end <float>` (дистанции тумана)

Пример:
```bash
poetry run flight --seed random --speed 25 --height-offset 18 --wireframe
```

## Управление
- `Esc` или закрыть окно — выход

## Что считается корректной работой v0.1
- Камера автоматически летит вперёд с постоянной скоростью, без поворотов
- Высота камеры следует рельефу (сглаженно): `y = terrain_height(0,z) + height_offset`
- Поверхность бесконечная: чанки подгружаются по мере полёта
- Работа плавная: генерация чанков выполняется в фоновом потоке

См. `/docs` для подробностей.


## Примечание про старт
По умолчанию при запуске выполняется короткий warmup (до ~2 сек), чтобы рельеф был виден сразу.


## Изменения v0.2.1
- Туман сделан более заметным (fog по forward-distance)
- Ускорена генерация чанков: векторизованное вычисление высот (быстрый value-noise)


## v0.3.3 (B)
- Добавлен двухкольцевой LOD (near/far)
- Плавные переходы LOD за счёт distance-fade (u_chunk_fade)
- Адаптивная подгрузка чанков под target FPS
- CLI: `--lod/--no-lod`, `--target-fps`, `--noise`


## v0.3.3 (B hotfix)
- Убрано мерцание в зоне перекрытия LOD: near-fade теперь инвертирован (near виден близко) + добавлен depth bias для far.
