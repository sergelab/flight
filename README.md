# flight (v0.9.0)

Графическая программа "бесконечного" полёта над гористой поверхностью.
Рендер: ModernGL, окно/ввод: pygame. Менеджер зависимостей: Poetry.

## Цель v0.3+ (Variant A: стабильность)
Начиная с v0.3 зафиксирована **стабильная базовая картинка без мерцания**:
- цвет поверхности задаётся по высоте (палитра)
- освещение Lambert (diffuse) + фиксированный ambient
- туман (fog) по дальности вперёд

Дополнительно (v0.3+):
- более разнообразная форма рельефа (domain warp + macro layer)
- реки и озёра (синие оттенки поверх базовой палитры)

В этой версии **нет** мелкодетальной процедурной "текстуры" (контуров/noise) — это сознательное решение, чтобы убрать shimmer на движении камеры.

## Что добавлено в v0.7
- Леса (variant C): реальные 3D-деревья (инстансинг), детерминированное размещение по биому.
- Леса появляются только в "ближнем" кольце LOD (для FPS), дальние чанки без деревьев.

## Что добавлено в v0.9
- **"Телесный" полёт (core flight feel)** в ручном режиме:
  - инерция скорости (ускорение/торможение + drag)
  - инерция поворота (yaw-rate с угловым ускорением/drag)
  - ограничения манёвра на высокой скорости (yaw-rate caps зависят от скорости)
  - лёгкий крен камеры (bank) в поворотах

Управление (как и раньше): ↑/↓ — газ, ←/→ — поворот, Esc — выход.

Режим `--auto` остаётся: автополёт вперёд без ручного управления.

## Требования
- Python 3.12
- macOS приоритетно (кроссплатформенно)

## Установка
```bash
poetry install
```

## Запуск
```bash
poetry run flight
```

## Параметры CLI
Полный список и примеры — в `/docs/tech/build_run.md`.

Ключевые параметры:
- `--seed <int|random>`
- `--speed <float>` — max speed
- `--height-offset <float>`
- `--debug`
- `--auto` — автополёт
- `--trees / --no-trees`, `--tree-density <float>`
- `--lod / --no-lod` (экспериментально)
- `--noise fast|simplex`

Управление полётом (v0.9, ручной режим):
- `--accel`, `--brake`, `--drag`
- `--yaw-rate-slow`, `--yaw-rate-fast`, `--yaw-accel`, `--yaw-decel`, `--yaw-drag`
- `--bank-gain`, `--bank-max`, `--bank-smooth`
- `--turn-rate` — legacy (v0.8)

## Документация
- PM: `/docs/pm/prd.md`, `/docs/pm/roadmap.md`
- Tech: `/docs/tech/*`
- Индекс: `/docs/knowledge_base.md`
